<style>
video {
width:500px;
height:500px;
border:1px solid blue;

}
</style>

<video autoplay='true' id='videoElement'>
</video>

<img id='imgElement' src="">
<canvas id='canvasElement' style="display:none;"></canvas>
<script>

var video=document.querySelector("#videoElement");
var canvas = document.querySelector('#canvasElement');
var ctx = canvas.getContext('2d');
var localMediaStream = null;

navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;

if(navigator.getUserMedia){
	navigator.getUserMedia({video:true},handleVideo,videoError);
}

function handleVideo(stream){
	video.srcObject = stream;
}

function videoError(e){ 
}

  

function snapshot() {

	canvas.width = video.videoWidth;
  	canvas.height = video.videoHeight;
	ctx.drawImage(video, 0, 0);
  // "image/webp" works in Chrome.
  // Other browsers will fall back to image/png.
	document.querySelector('#imgElement').src = canvas.toDataURL('image/webp');

}

video.addEventListener('click', snapshot, false);

// // Not showing vendor prefixes or code that works cross-browser.
// navigator.getUserMedia({video: true}, function(stream) {
// video.src = window.URL.createObjectURL(stream);
// localMediaStream = stream;
// }, errorCallback);

</script>